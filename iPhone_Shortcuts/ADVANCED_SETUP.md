# 📱 고급 로또 업데이트 단축어 - 실행 결과 확인 기능

## 🎯 업그레이드된 기능
- ✅ GitHub Actions 실행 요청 성공/실패 즉시 확인
- ✅ 2분 후 실제 워크플로우 완료 상태 확인
- ✅ 상세한 오류 메시지 표시
- ✅ GitHub Actions 페이지 바로가기 링크

## 🔧 단축어 구성 (총 8개 액션)

### 액션 1: 시작 알림
```
알림 표시:
- 제목: 🎰 로또 업데이트
- 메시지: GitHub Actions를 실행합니다...
```

### 액션 2: GitHub Actions 실행 요청
```
웹의 콘텐츠 가져오기:
- URL: https://api.github.com/repos/zomvimaster-source/lotto-service/actions/workflows/update-lotto-data.yml/dispatches
- 방법: POST
- 헤더:
  Authorization: token YOUR_GITHUB_TOKEN
  Accept: application/vnd.github.v3+json
  Content-Type: application/json
- 본문: {"ref": "main"}
```

### 액션 3: 실행 요청 결과 확인
```
If 문:
- 조건: 웹 요청의 상태 코드
- 값: 204와 같음
```

### 액션 4: 실행 성공 시 (If 내부)
```
알림 표시:
- 제목: ✅ 실행 요청 성공!
- 메시지: GitHub Actions가 시작되었습니다.
2분 후 완료 상태를 확인합니다...
```

### 액션 5: 2분 대기 (If 내부)
```
대기:
- 시간: 120초 (2분)
```

### 액션 6: 최근 실행 상태 확인 (If 내부)
```
웹의 콘텐츠 가져오기:
- URL: https://api.github.com/repos/zomvimaster-source/lotto-service/actions/runs?per_page=1
- 방법: GET
- 헤더:
  Authorization: token YOUR_GITHUB_TOKEN
  Accept: application/vnd.github.v3+json
```

### 액션 7: 완료 상태 알림 (If 내부)
```
텍스트에서 항목 가져오기:
- 입력: 웹 요청의 콘텐츠
- 가져올 항목: 값
- 키: workflow_runs[0].conclusion

If 문:
- 조건: 텍스트
- 값: "success"와 같음

성공 시 알림:
- 제목: 🎉 업데이트 완료!
- 메시지: 로또 데이터가 성공적으로 업데이트되었습니다!
웹사이트에 반영이 완료됩니다.

실패 시 알림:
- 제목: ⚠️ 업데이트 실패
- 메시지: GitHub Actions 실행 중 오류가 발생했습니다.
Actions 페이지에서 로그를 확인해주세요.
```

### 액션 8: 실행 요청 실패 시 (Otherwise)
```
알림 표시:
- 제목: ❌ 실행 요청 실패
- 메시지: GitHub Actions 실행 요청이 실패했습니다.

오류 코드: [웹 요청 상태 코드]
토큰과 설정을 확인해주세요.
```

## 🎯 간단 버전 (추천)

고급 버전이 복잡하다면, 이 간단 버전을 사용하세요:

### 기본 + 상태 코드 확인
1. **시작 알림**
2. **GitHub Actions 실행**
3. **상태 코드 확인 (204 = 성공)**
4. **성공/실패 알림**

```
웹의 콘텐츠 가져오기 액션 수정:
- 결과를 변수에 저장
- 상태 코드 확인하여 조건문 처리
```

## 📋 설정 단계

### 1단계: 기존 단축어 편집
1. **단축어 앱** → **로또 업데이트** → **편집**

### 2단계: 조건문 추가
1. **웹의 콘텐츠 가져오기** 액션 뒤에 **If** 액션 추가
2. **조건:** 상태 코드 = 204

### 3단계: 성공/실패 알림 분리
1. **If 내부:** 성공 알림
2. **Otherwise:** 실패 알림 + 상태 코드 표시

### 4단계: 테스트
1. **단축어 실행**
2. **상태 코드별 알림 확인**
3. **GitHub Actions 페이지에서 실제 결과 확인**

## 🔍 상태 코드별 의미

| 코드 | 의미 | 조치 |
|------|------|------|
| 204 | 성공 | ✅ 정상 실행됨 |
| 401 | 토큰 오류 | 🔑 토큰 재발급 필요 |
| 403 | 권한 오류 | 🛡️ workflow 권한 확인 |
| 404 | 파일 없음 | 📁 워크플로우 파일 확인 |
| 422 | 입력 오류 | 📝 브랜치명 확인 |

## 🎉 최종 결과

이제 단축어 실행 시:
1. **즉시**: GitHub Actions 실행 성공/실패 확인
2. **2분 후**: 실제 워크플로우 완료 상태 확인  
3. **상세 정보**: 오류 코드와 해결 방법 안내
4. **편의 기능**: GitHub Actions 페이지 바로가기

**완벽한 모니터링이 가능한 스마트 단축어 완성!** 🎰✨