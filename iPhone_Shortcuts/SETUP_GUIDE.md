# 📱 iPhone 로또 자동 업데이트 설정 가이드

## 🎯 최종 결과
- **매주 토요일 오후 9시 5분 자동 실행**
- **수동 실행도 가능** (홈 화면 아이콘 터치)
- **Siri 음성 명령** ("로또 업데이트")

---

## 1️⃣ GitHub Personal Access Token 발급

### GitHub.com에서 토큰 생성
1. **GitHub.com 로그인** → **Settings**
2. **Developer settings** → **Personal access tokens** → **Tokens (classic)**
3. **"Generate new token (classic)" 클릭**
4. **토큰 이름:** `iPhone Lotto Update`
5. **만료일:** `No expiration` (또는 1년)
6. **권한 선택:**
   - ✅ `repo` (전체 저장소 액세스)
   - ✅ `workflow` (GitHub Actions 실행)
7. **"Generate token" 클릭**
8. **⚠️ 토큰 복사** (한 번만 보여짐!)

---

## 2️⃣ iPhone 단축어 설치

### 방법 A: 수동 생성 (추천)

1. **단축어 앱** 실행
2. **"+" 버튼** → **새로운 단축어**
3. **단축어 이름:** `로또 업데이트`
4. **아이콘:** 🎰 (주사위 또는 슬롯머신)

### 액션 추가 순서:

#### 액션 1: 시작 알림
- **"알림 표시" 추가**
- **제목:** `🎰 로또 업데이트`
- **내용:** `로또 데이터 업데이트를 시작합니다...`

#### 액션 2: GitHub API 호출
- **"웹의 콘텐츠 가져오기" 추가**
- **URL:** `https://api.github.com/repos/zomvimaster-source/lotto-service/actions/workflows/update-lotto-data.yml/dispatches`
- **방법:** `POST`
- **헤더:**
  ```
  Authorization: token YOUR_GITHUB_TOKEN_HERE
  Accept: application/vnd.github.v3+json
  Content-Type: application/json
  User-Agent: iPhone-Shortcuts/1.0
  ```
- **요청 본문 (JSON):**
  ```json
  {
    "ref": "main"
  }
  ```

#### 액션 3: 성공 알림
- **"알림 표시" 추가**
- **제목:** `✅ 업데이트 완료`
- **내용:** `로또 데이터 업데이트가 시작되었습니다!\n웹사이트에 5분 후 반영됩니다.`

### ⚠️ 토큰 교체
`YOUR_GITHUB_TOKEN_HERE` 부분을 1단계에서 복사한 실제 토큰으로 교체하세요.

---

## 3️⃣ 자동화 설정 (매주 토요일 9시 5분)

1. **단축어 앱** → **자동화** 탭
2. **"+" 버튼** → **개인용 자동화 만들기**
3. **시간** 선택
4. **설정:**
   - **시간:** `오후 9:05`
   - **반복:** `매주`
   - **요일:** `토요일` ✅
5. **다음** → **동작 추가**
6. **"단축어 실행" 선택**
7. **단축어:** `로또 업데이트` 선택
8. **다음** → **실행 전에 묻지 않기** ✅
9. **완료**

---

## 4️⃣ 추가 설정 (선택사항)

### 홈 화면에 추가
1. **단축어 목록**에서 `로또 업데이트` 단축어
2. **⋯ (더보기)** → **홈 화면에 추가**
3. **이름:** `🎰 로또`
4. **추가**

### Siri 음성 명령 설정
1. **단축어 편집** → **설정**
2. **Siri에 추가**
3. **문구 녹음:** "로또 업데이트" 또는 "로또 데이터 업데이트"

### 위젯 추가
1. **홈 화면 길게 누르기** → **+**
2. **단축어** 위젯 선택
3. **크기 선택** → **위젯 추가**
4. **위젯 편집**에서 `로또 업데이트` 선택

---

## 5️⃣ 사용 방법

### 자동 실행
- **매주 토요일 오후 9시 5분**에 자동으로 실행됩니다
- 별도 조작 불필요!

### 수동 실행
- **홈 화면 아이콘** 터치
- **Siri:** "로또 업데이트"
- **단축어 앱**에서 직접 실행
- **위젯**에서 터치

---

## 🔧 문제 해결

### "권한 오류" 발생 시
- GitHub 토큰의 `repo`, `workflow` 권한 확인
- 토큰이 만료되지 않았는지 확인

### "404 오류" 발생 시
- URL이 정확한지 확인
- 저장소 이름 확인: `zomvimaster-source/lotto-service`

### 알림이 오지 않을 때
- **설정** → **알림** → **단축어** → 알림 허용 확인
- 자동화에서 "실행 전에 묻지 않기" 설정 확인

---

## 🎉 완성!

이제 설정이 완료되었습니다:
- ✅ 매주 토요일 9시 5분 자동 실행
- ✅ 홈 화면에서 수동 실행 가능
- ✅ Siri 음성 명령으로 실행
- ✅ 위젯에서 원터치 실행

**로또 추첨 후 자동으로 웹사이트가 업데이트됩니다!** 🎰✨